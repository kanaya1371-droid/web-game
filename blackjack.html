<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Blackjack</title>
<style>
body{margin:0;background:#020617;color:#fff;font-family:Arial;text-align:center}
.wrap{padding:16px}
.card{font-size:24px;margin:10px}
button,input{padding:12px;border:none;border-radius:10px;margin:6px}
button{background:#1abc9c;color:#000;font-weight:bold}
</style>
</head>
<body>

<div class="wrap">
  <h3>üÉè Blackjack</h3>
  <input id="bet" type="number" placeholder="Taruhan">
  <div>
    <button onclick="start()">Start</button>
    <button onclick="hit()">Hit</button>
    <button onclick="stand()">Stand</button>
  </div>

  <div class="card">Player: <span id="p"></span></div>
  <div class="card">Dealer: <span id="d"></span></div>
  <p id="res"></p>
</div>

<script>
let user=JSON.parse(localStorage.getItem("user"));
if(!user) location.href="login.html";

let p=[],d=[],betVal=0,done=false;

function draw(){ return Math.floor(Math.random()*10)+1 }

function sum(a){ return a.reduce((x,y)=>x+y,0) }

function start(){
  betVal=+bet.value;
  if(betVal<=0) return alert("Taruhan?");
  if((user.saldo||0)<betVal) return alert("Saldo kurang");
  p=[draw(),draw()];
  d=[draw()];
  done=false;
  update();
}

function hit(){
  if(done) return;
  p.push(draw());
  if(sum(p)>21) end(false);
  update();
}

function stand(){
  if(done) return;
  while(sum(d)<17) d.push(draw());
  const ps=sum(p), ds=sum(d);
  if(ds>21||ps>ds) end(true);
  else if(ps===ds) end(null);
  else end(false);
}

function end(win){
  done=true;
  if(win===true){
    user.saldo+=betVal*2;
    res.textContent="MENANG x2";
  }else if(win===null){
    res.textContent="SERI";
  }else{
    user.saldo-=betVal;
    res.textContent="KALAH";
  }
  localStorage.setItem("user",JSON.stringify(user));
}

function update(){
  pEl.textContent=p.join(", ")+" ("+sum(p)+")";
  dEl.textContent=d.join(", ")+" ("+sum(d)+")";
}
</script>

<script>
const pEl=document.getElementById("p");
const dEl=document.getElementById("d");
</script>

</body>
</html>
